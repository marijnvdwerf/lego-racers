.include "macro.inc"

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64     # allow use of 64-bit general purpose registers

.section .text, "ax"

glabel osPfsIsPlug
/* 22670 80021A70 27BDFFA0 */  addiu      $sp, $sp, -0x60
/* 22674 80021A74 AFB20040 */  sw         $s2, 0x40($sp)
/* 22678 80021A78 00809021 */  addu       $s2, $a0, $zero
/* 2267C 80021A7C AFB70054 */  sw         $s7, 0x54($sp)
/* 22680 80021A80 00A0B821 */  addu       $s7, $a1, $zero
/* 22684 80021A84 AFB30044 */  sw         $s3, 0x44($sp)
/* 22688 80021A88 00009821 */  addu       $s3, $zero, $zero
/* 2268C 80021A8C AFB00038 */  sw         $s0, 0x38($sp)
/* 22690 80021A90 24100003 */  addiu      $s0, $zero, 0x3
/* 22694 80021A94 AFBF0058 */  sw         $ra, 0x58($sp)
/* 22698 80021A98 AFB60050 */  sw         $s6, 0x50($sp)
/* 2269C 80021A9C AFB5004C */  sw         $s5, 0x4C($sp)
/* 226A0 80021AA0 AFB40048 */  sw         $s4, 0x48($sp)
/* 226A4 80021AA4 0C007C8D */  jal        func_8001F234
/* 226A8 80021AA8 AFB1003C */   sw        $s1, 0x3C($sp)
/* 226AC 80021AAC 3C148004 */  lui        $s4, %hi(D_8003BB90)
/* 226B0 80021AB0 2694BB90 */  addiu      $s4, $s4, %lo(D_8003BB90)
/* 226B4 80021AB4 27B10020 */  addiu      $s1, $sp, 0x20
/* 226B8 80021AB8 27B50010 */  addiu      $s5, $sp, 0x10
.L80021ABC:
/* 226BC 80021ABC 0C0086FB */  jal        func_80021BEC
/* 226C0 80021AC0 00002021 */   addu      $a0, $zero, $zero
/* 226C4 80021AC4 24040001 */  addiu      $a0, $zero, 0x1
/* 226C8 80021AC8 0C007C4C */  jal        func_8001F130
/* 226CC 80021ACC 02802821 */   addu      $a1, $s4, $zero
/* 226D0 80021AD0 02402021 */  addu       $a0, $s2, $zero
/* 226D4 80021AD4 02202821 */  addu       $a1, $s1, $zero
/* 226D8 80021AD8 0C007720 */  jal        osRecvMesg
/* 226DC 80021ADC 24060001 */   addiu     $a2, $zero, 0x1
/* 226E0 80021AE0 00002021 */  addu       $a0, $zero, $zero
/* 226E4 80021AE4 0C007C4C */  jal        func_8001F130
/* 226E8 80021AE8 02802821 */   addu      $a1, $s4, $zero
/* 226EC 80021AEC 02402021 */  addu       $a0, $s2, $zero
/* 226F0 80021AF0 02202821 */  addu       $a1, $s1, $zero
/* 226F4 80021AF4 24060001 */  addiu      $a2, $zero, 0x1
/* 226F8 80021AF8 0C007720 */  jal        osRecvMesg
/* 226FC 80021AFC 0040B021 */   addu      $s6, $v0, $zero
/* 22700 80021B00 27A40024 */  addiu      $a0, $sp, 0x24
/* 22704 80021B04 0C008724 */  jal        func_80021C90
/* 22708 80021B08 27A50010 */   addiu     $a1, $sp, 0x10
/* 2270C 80021B0C 3C028004 */  lui        $v0, %hi(D_8003A53C)
/* 22710 80021B10 9042A53C */  lbu        $v0, %lo(D_8003A53C)($v0)
/* 22714 80021B14 1840000C */  blez       $v0, .L80021B48
/* 22718 80021B18 00002021 */   addu      $a0, $zero, $zero
/* 2271C 80021B1C 00402821 */  addu       $a1, $v0, $zero
/* 22720 80021B20 02A01821 */  addu       $v1, $s5, $zero
.L80021B24:
/* 22724 80021B24 90620002 */  lbu        $v0, 0x2($v1)
/* 22728 80021B28 30420004 */  andi       $v0, $v0, 0x4
/* 2272C 80021B2C 54400003 */  bnel       $v0, $zero, .L80021B3C
/* 22730 80021B30 24840001 */   addiu     $a0, $a0, 0x1
/* 22734 80021B34 080086D2 */  j          .L80021B48
/* 22738 80021B38 2610FFFF */   addiu     $s0, $s0, -0x1
.L80021B3C:
/* 2273C 80021B3C 0085102A */  slt        $v0, $a0, $a1
/* 22740 80021B40 1440FFF8 */  bnez       $v0, .L80021B24
/* 22744 80021B44 24630004 */   addiu     $v1, $v1, 0x4
.L80021B48:
/* 22748 80021B48 3C038004 */  lui        $v1, %hi(D_8003A53C)
/* 2274C 80021B4C 9063A53C */  lbu        $v1, %lo(D_8003A53C)($v1)
/* 22750 80021B50 00831026 */  xor        $v0, $a0, $v1
/* 22754 80021B54 0002102B */  sltu       $v0, $zero, $v0
/* 22758 80021B58 00021023 */  negu       $v0, $v0
/* 2275C 80021B5C 02028024 */  and        $s0, $s0, $v0
/* 22760 80021B60 1E00FFD6 */  bgtz       $s0, .L80021ABC
/* 22764 80021B64 00000000 */   nop
/* 22768 80021B68 10600011 */  beqz       $v1, .L80021BB0
/* 2276C 80021B6C 00002021 */   addu      $a0, $zero, $zero
/* 22770 80021B70 24060001 */  addiu      $a2, $zero, 0x1
/* 22774 80021B74 00602821 */  addu       $a1, $v1, $zero
/* 22778 80021B78 27A30010 */  addiu      $v1, $sp, 0x10
.L80021B7C:
/* 2277C 80021B7C 90620003 */  lbu        $v0, 0x3($v1)
/* 22780 80021B80 54400008 */  bnel       $v0, $zero, .L80021BA4
/* 22784 80021B84 24840001 */   addiu     $a0, $a0, 0x1
/* 22788 80021B88 90620002 */  lbu        $v0, 0x2($v1)
/* 2278C 80021B8C 30420001 */  andi       $v0, $v0, 0x1
/* 22790 80021B90 50400004 */  beql       $v0, $zero, .L80021BA4
/* 22794 80021B94 24840001 */   addiu     $a0, $a0, 0x1
/* 22798 80021B98 00861004 */  sllv       $v0, $a2, $a0
/* 2279C 80021B9C 02629825 */  or         $s3, $s3, $v0
/* 227A0 80021BA0 24840001 */  addiu      $a0, $a0, 0x1
.L80021BA4:
/* 227A4 80021BA4 0085102A */  slt        $v0, $a0, $a1
/* 227A8 80021BA8 1440FFF4 */  bnez       $v0, .L80021B7C
/* 227AC 80021BAC 24630004 */   addiu     $v1, $v1, 0x4
.L80021BB0:
/* 227B0 80021BB0 0C007CA8 */  jal        func_8001F2A0
/* 227B4 80021BB4 00000000 */   nop
/* 227B8 80021BB8 A2F30000 */  sb         $s3, 0x0($s7)
/* 227BC 80021BBC 02C01021 */  addu       $v0, $s6, $zero
/* 227C0 80021BC0 8FBF0058 */  lw         $ra, 0x58($sp)
/* 227C4 80021BC4 8FB70054 */  lw         $s7, 0x54($sp)
/* 227C8 80021BC8 8FB60050 */  lw         $s6, 0x50($sp)
/* 227CC 80021BCC 8FB5004C */  lw         $s5, 0x4C($sp)
/* 227D0 80021BD0 8FB40048 */  lw         $s4, 0x48($sp)
/* 227D4 80021BD4 8FB30044 */  lw         $s3, 0x44($sp)
/* 227D8 80021BD8 8FB20040 */  lw         $s2, 0x40($sp)
/* 227DC 80021BDC 8FB1003C */  lw         $s1, 0x3C($sp)
/* 227E0 80021BE0 8FB00038 */  lw         $s0, 0x38($sp)
/* 227E4 80021BE4 03E00008 */  jr         $ra
/* 227E8 80021BE8 27BD0060 */   addiu     $sp, $sp, 0x60

glabel func_80021BEC
/* 227EC 80021BEC 27BDFFF0 */  addiu      $sp, $sp, -0x10
/* 227F0 80021BF0 3C058004 */  lui        $a1, %hi(D_8003A53C)
/* 227F4 80021BF4 90A5A53C */  lbu        $a1, %lo(D_8003A53C)($a1)
/* 227F8 80021BF8 3C078004 */  lui        $a3, %hi(D_8003BB90)
/* 227FC 80021BFC 24E7BB90 */  addiu      $a3, $a3, %lo(D_8003BB90)
/* 22800 80021C00 00003021 */  addu       $a2, $zero, $zero
/* 22804 80021C04 24020001 */  addiu      $v0, $zero, 0x1
/* 22808 80021C08 240300FF */  addiu      $v1, $zero, 0xFF
/* 2280C 80021C0C 3C018004 */  lui        $at, %hi(D_8003BBCC)
/* 22810 80021C10 AC22BBCC */  sw         $v0, %lo(D_8003BBCC)($at)
/* 22814 80021C14 24020001 */  addiu      $v0, $zero, 0x1
/* 22818 80021C18 A3A20001 */  sb         $v0, 0x1($sp)
/* 2281C 80021C1C 24020003 */  addiu      $v0, $zero, 0x3
/* 22820 80021C20 3C018004 */  lui        $at, %hi(D_8003A580)
/* 22824 80021C24 A024A580 */  sb         $a0, %lo(D_8003A580)($at)
/* 22828 80021C28 A3A30000 */  sb         $v1, 0x0($sp)
/* 2282C 80021C2C A3A20002 */  sb         $v0, 0x2($sp)
/* 22830 80021C30 A3A40003 */  sb         $a0, 0x3($sp)
/* 22834 80021C34 A3A30004 */  sb         $v1, 0x4($sp)
/* 22838 80021C38 A3A30005 */  sb         $v1, 0x5($sp)
/* 2283C 80021C3C A3A30006 */  sb         $v1, 0x6($sp)
/* 22840 80021C40 18A0000F */  blez       $a1, .L80021C80
/* 22844 80021C44 A3A30007 */   sb        $v1, 0x7($sp)
.L80021C48:
/* 22848 80021C48 8BA20000 */  lwl        $v0, 0x0($sp)
/* 2284C 80021C4C 9BA20003 */  lwr        $v0, 0x3($sp)
/* 22850 80021C50 8BA30004 */  lwl        $v1, 0x4($sp)
/* 22854 80021C54 9BA30007 */  lwr        $v1, 0x7($sp)
/* 22858 80021C58 A8E20000 */  swl        $v0, 0x0($a3)
/* 2285C 80021C5C B8E20003 */  swr        $v0, 0x3($a3)
/* 22860 80021C60 A8E30004 */  swl        $v1, 0x4($a3)
/* 22864 80021C64 B8E30007 */  swr        $v1, 0x7($a3)
/* 22868 80021C68 3C028004 */  lui        $v0, %hi(D_8003A53C)
/* 2286C 80021C6C 9042A53C */  lbu        $v0, %lo(D_8003A53C)($v0)
/* 22870 80021C70 24C60001 */  addiu      $a2, $a2, 0x1
/* 22874 80021C74 00C2102A */  slt        $v0, $a2, $v0
/* 22878 80021C78 1440FFF3 */  bnez       $v0, .L80021C48
/* 2287C 80021C7C 24E70008 */   addiu     $a3, $a3, 0x8
.L80021C80:
/* 22880 80021C80 240200FE */  addiu      $v0, $zero, 0xFE
/* 22884 80021C84 A0E20000 */  sb         $v0, 0x0($a3)
/* 22888 80021C88 03E00008 */  jr         $ra
/* 2288C 80021C8C 27BD0010 */   addiu     $sp, $sp, 0x10

glabel func_80021C90
/* 22890 80021C90 27BDFFF0 */  addiu      $sp, $sp, -0x10
/* 22894 80021C94 00805821 */  addu       $t3, $a0, $zero
/* 22898 80021C98 00A04821 */  addu       $t1, $a1, $zero
/* 2289C 80021C9C 00005021 */  addu       $t2, $zero, $zero
/* 228A0 80021CA0 3C028004 */  lui        $v0, %hi(D_8003A53C)
/* 228A4 80021CA4 9042A53C */  lbu        $v0, %lo(D_8003A53C)($v0)
/* 228A8 80021CA8 3C088004 */  lui        $t0, %hi(D_8003BB90)
/* 228AC 80021CAC 2508BB90 */  addiu      $t0, $t0, %lo(D_8003BB90)
/* 228B0 80021CB0 18400021 */  blez       $v0, .L80021D38
/* 228B4 80021CB4 00003821 */   addu      $a3, $zero, $zero
/* 228B8 80021CB8 240C0001 */  addiu      $t4, $zero, 0x1
/* 228BC 80021CBC 24A60002 */  addiu      $a2, $a1, 0x2
.L80021CC0:
/* 228C0 80021CC0 89020000 */  lwl        $v0, 0x0($t0)
/* 228C4 80021CC4 99020003 */  lwr        $v0, 0x3($t0)
/* 228C8 80021CC8 89030004 */  lwl        $v1, 0x4($t0)
/* 228CC 80021CCC 99030007 */  lwr        $v1, 0x7($t0)
/* 228D0 80021CD0 ABA20000 */  swl        $v0, 0x0($sp)
/* 228D4 80021CD4 BBA20003 */  swr        $v0, 0x3($sp)
/* 228D8 80021CD8 ABA30004 */  swl        $v1, 0x4($sp)
/* 228DC 80021CDC BBA30007 */  swr        $v1, 0x7($sp)
/* 228E0 80021CE0 93A20002 */  lbu        $v0, 0x2($sp)
/* 228E4 80021CE4 304200C0 */  andi       $v0, $v0, 0xC0
/* 228E8 80021CE8 00021102 */  srl        $v0, $v0, 4
/* 228EC 80021CEC 1440000A */  bnez       $v0, .L80021D18
/* 228F0 80021CF0 A0C20001 */   sb        $v0, 0x1($a2)
/* 228F4 80021CF4 93A20005 */  lbu        $v0, 0x5($sp)
/* 228F8 80021CF8 93A30004 */  lbu        $v1, 0x4($sp)
/* 228FC 80021CFC 00021200 */  sll        $v0, $v0, 8
/* 22900 80021D00 00621825 */  or         $v1, $v1, $v0
/* 22904 80021D04 A5230000 */  sh         $v1, 0x0($t1)
/* 22908 80021D08 93A30006 */  lbu        $v1, 0x6($sp)
/* 2290C 80021D0C 00EC1004 */  sllv       $v0, $t4, $a3
/* 22910 80021D10 01425025 */  or         $t2, $t2, $v0
/* 22914 80021D14 A0C30000 */  sb         $v1, 0x0($a2)
.L80021D18:
/* 22918 80021D18 24E70001 */  addiu      $a3, $a3, 0x1
/* 2291C 80021D1C 25080008 */  addiu      $t0, $t0, 0x8
/* 22920 80021D20 3C028004 */  lui        $v0, %hi(D_8003A53C)
/* 22924 80021D24 9042A53C */  lbu        $v0, %lo(D_8003A53C)($v0)
/* 22928 80021D28 24C60004 */  addiu      $a2, $a2, 0x4
/* 2292C 80021D2C 00E2102A */  slt        $v0, $a3, $v0
/* 22930 80021D30 1440FFE3 */  bnez       $v0, .L80021CC0
/* 22934 80021D34 25290004 */   addiu     $t1, $t1, 0x4
.L80021D38:
/* 22938 80021D38 A16A0000 */  sb         $t2, 0x0($t3)
/* 2293C 80021D3C 03E00008 */  jr         $ra
/* 22940 80021D40 27BD0010 */   addiu     $sp, $sp, 0x10
/* 22944 80021D44 00000000 */  nop
/* 22948 80021D48 00000000 */  nop
/* 2294C 80021D4C 00000000 */  nop
